<div class="contacts-container">
<div class="contacts-header">
  <div class="header-row">
  <div class="title-block">
    <h2>Mes Contacts</h2>
    <p class="subtitle">
      Vue d'ensemble de vos contacts
    </p>
  </div>

  <button
    mat-raised-button
    color="primary"
    class="new-contact-btn"
    [routerLink]="'/user/new-contact'">
    <mat-icon class="btn-icon">add</mat-icon>
    Nouveau Contact
  </button>
</div>

  <div class="table-wrapper">
    <table mat-table [dataSource]="dataSource" class="contacts-table mat-elevation-z0">

        <!-- First Name -->
        <ng-container matColumnDef="firstName">
          <th mat-header-cell *matHeaderCellDef>Pr√©nom</th>
          <td mat-cell *matCellDef="let tx">{{ tx.firstName }}</td>
        </ng-container>

        <!-- Last Name -->
        <ng-container matColumnDef="lastName">
          <th mat-header-cell *matHeaderCellDef>Nom</th>
          <td mat-cell *matCellDef="let tx">{{ tx.lastName }}</td>
        </ng-container>

        <!-- Email -->
        <ng-container matColumnDef="email">
          <th mat-header-cell *matHeaderCellDef>Email</th>
          <td mat-cell *matCellDef="let tx">{{ tx.email }}</td>
        </ng-container>

        <!-- IBAN -->
        <ng-container matColumnDef="iban">
          <th mat-header-cell *matHeaderCellDef>IBAN</th>
          <td mat-cell *matCellDef="let tx">{{ tx.iban }}</td>
        </ng-container>

        <!-- Actions -->
        <ng-container matColumnDef="actions">
          <th mat-header-cell *matHeaderCellDef class="actions-header">
            Actions
          </th>
          <td mat-cell *matCellDef="let tx" class="actions-cell">
            <button mat-icon-button class="action-btn edit-btn" (click)="onEditContact(tx.id)">
              <mat-icon>edit</mat-icon>
            </button>
            <button mat-icon-button class="action-btn delete-btn" (click)="openDeleteDialog(tx)">
              <mat-icon>delete</mat-icon>
            </button>
          </td>
        </ng-container>

        <!-- Header / Rows -->
        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
        <tr
          mat-row
          *matRowDef="let row; columns: displayedColumns; let i = index"
          [class.alt-row]="i % 2 === 1">
        </tr>
      </table>
  </div>
</div>
</div>

<!-- Dialog Suppression -->
<ng-template #deleteDialog>
  <h2 mat-dialog-title>Suppression</h2>
  <mat-dialog-content>
    Voulez-vous vraiment supprimer ce contact ?
    <br />
    <strong>{{ selectedContact?.firstName }} {{ selectedContact?.lastName }}</strong>
  </mat-dialog-content>
  <mat-dialog-actions>
    <button mat-button mat-dialog-close>Annuler</button>
    <button mat-button color="warn" (click)="confirmDelete()" mat-dialog-close>
      Supprimer
    </button>
  </mat-dialog-actions>
</ng-template>

